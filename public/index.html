<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game WebApp</title>
    <meta name="telegram-web-app-bot-api-version" content="9.0">
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="stylesheet" href="/styles/animations.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-circle"></div>
            <p class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è<span class="loading-dots"></span></p>
        </div>
    </div>

    <div id="app" class="app hidden">
        <header class="header">
            <h1 class="app-title">Game WebApp</h1>
        </header>

        <main class="main-content">
            <div id="home-page" class="page active">
                <div class="welcome-section">
                    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                    <p>–ò–≥—Ä–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π TON –∏ Telegram Stars</p>
                </div>
                
                <div class="balance-cards">
                    <div class="balance-card ton-balance">
                        <h3>TON –ë–∞–ª–∞–Ω—Å</h3>
                        <p id="ton-balance">0 TON</p>
                    </div>
                    <div class="balance-card stars-balance">
                        <h3>Stars –ë–∞–ª–∞–Ω—Å</h3>
                        <p id="stars-balance">0 Stars</p>
                    </div>
                </div>
            </div>

            <div id="game-page" class="page">
                <div class="game-container">
                    <div class="game-header">
                        <h2>PvP –†—É–ª–µ—Ç–∫–∞</h2>
                        <div class="game-id">#<span id="game-number">113091</span></div>
                    </div>
                    
                    <div class="wheel-container">
                        <div class="wheel" id="wheel">
                            <div class="wheel-segment player1-segment"></div>
                            <div class="wheel-segment player2-segment"></div>
                            <div class="wheel-pointer"></div>
                        </div>
                    </div>
                    
                    <div class="game-info">
                        <div class="bank-info">
                            <h3>–û–±—â–∏–π –±–∞–Ω–∫</h3>
                            <p><span id="total-gifts">0</span> –ì–ò–§–¢–û–í / <span id="total-ton">0</span> TON</p>
                        </div>
                        
                        <div class="players-info">
                            <div class="player player1">
                                <span class="player-name">–í–∞—à–∞ —Å—Ç–∞–≤–∫–∞</span>
                                <span class="player-bet">0 TON</span>
                                <span class="player-chance">0%</span>
                            </div>
                            <div class="player player2">
                                <span class="player-name">–û–ø–ø–æ–Ω–µ–Ω—Ç</span>
                                <span class="player-bet">0 TON</span>
                                <span class="player-chance">0%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="game-controls">
                        <div class="timer" id="game-timer">
                            –°—Ç–∞—Ä—Ç —á–µ—Ä–µ–∑ 00:00
                        </div>
                        <button class="btn btn-primary" id="place-bet">
                            –°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É
                        </button>
                        <button class="btn btn-secondary" id="add-bet">
                            –î–æ–±–∞–≤–∏—Ç—å –ì–∏—Ñ—Ç—ã
                        </button>
                    </div>
                </div>
            </div>

            <div id="profile-page" class="page">
                <div class="profile-header">
                    <img id="user-avatar" src="" alt="Avatar" class="profile-avatar">
                    <h2 id="user-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
                </div>
                
                <div class="wallet-section">
                    <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–º</h3>
                    <div class="balance-actions">
                        <button id="deposit-ton" class="btn btn-primary">–ü–æ–ø–æ–ª–Ω–∏—Ç—å TON</button>
                        <button id="withdraw-ton" class="btn btn-secondary">–í—ã–≤–µ—Å—Ç–∏ TON</button>
                        <button id="deposit-stars" class="btn btn-primary">–ü–æ–ø–æ–ª–Ω–∏—Ç—å Stars</button>
                        <button id="withdraw-stars" class="btn btn-secondary">–í—ã–≤–µ—Å—Ç–∏ Stars</button>
                    </div>
                    
                    <div class="gift-section">
                        <h3>–ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</h3>
                        <button id="request-gift" class="btn btn-special">–ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</button>
                    </div>
                </div>
            </div>

            <div id="inventory-page" class="page">
                <h2>–í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
                <div id="inventory-items" class="inventory-grid">
                    <div class="inventory-item">–ü—Ä–µ–¥–º–µ—Ç 1</div>
                    <div class="inventory-item">–ü—Ä–µ–¥–º–µ—Ç 2</div>
                    <div class="inventory-item">–ü—Ä–µ–¥–º–µ—Ç 3</div>
                </div>
            </div>
        </main>

        <nav class="bottom-nav">
            <button class="nav-btn active" data-page="home">
                <span class="nav-icon">üè†</span>
                <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
            </button>
            <button class="nav-btn" data-page="game">
                <span class="nav-icon">üéÆ</span>
                <span class="nav-label">–ò–≥—Ä–∞</span>
            </button>
            <button class="nav-btn" data-page="inventory">
                <span class="nav-icon">üéí</span>
                <span class="nav-label">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</span>
            </button>
            <button class="nav-btn" data-page="profile">
                <span class="nav-icon">üë§</span>
                <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
            </button>
        </nav>
    </div>

    <script>
        // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π —Å–∫—Ä–∏–ø—Ç
        console.log('üöÄ App starting...');
        
        // –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        function showApp() {
            const loading = document.getElementById('loading-screen');
            const app = document.getElementById('app');
            
            if (loading) {
                loading.style.display = 'none';
                console.log('Loading screen hidden');
            }
            
            if (app) {
                app.style.display = 'block';
                app.classList.remove('hidden');
                console.log('App shown');
            }
        }
        
        // –ü—Ä–æ—Å—Ç–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
        function setupNavigation() {
            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const pageId = this.getAttribute('data-page');
                    console.log('Navigating to:', pageId);
                    
                    // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                    document.querySelectorAll('.page').forEach(page => {
                        page.classList.remove('active');
                    });
                    
                    // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é
                    const targetPage = document.getElementById(pageId + '-page');
                    if (targetPage) {
                        targetPage.classList.add('active');
                    }
                    
                    // –ü–æ–¥—Å–≤–µ—Ç–∏—Ç—å –∫–Ω–æ–ø–∫—É
                    buttons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram
        function initTelegram() {
            if (typeof Telegram !== 'undefined') {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
                console.log('Telegram initialized');
                
                // –ü–æ–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ –µ—Å—Ç—å
                if (Telegram.WebApp.initDataUnsafe.user) {
                    const user = Telegram.WebApp.initDataUnsafe.user;
                    const nameEl = document.getElementById('user-name');
                    const avatarEl = document.getElementById('user-avatar');
                    
                    if (nameEl) {
                        nameEl.textContent = user.first_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
                    }
                    if (avatarEl && user.photo_url) {
                        avatarEl.src = user.photo_url;
                    }
                }
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded');
            showApp();
            initTelegram();
            setupNavigation();
        });
        
        // –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π: —Ç–∞–π–º–∞—É—Ç 5 —Å–µ–∫—É–Ω–¥
        setTimeout(showApp, 5000);
    </script>
</body>
</html>
